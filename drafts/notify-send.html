
<!DOCTYPE html>
<html lang="en">
<head>
  <link href='//fonts.googleapis.com/css?family=Source+Sans+Pro:300,400,700,400italic' rel='stylesheet' type='text/css'>

    <link rel="stylesheet" type="text/css" href="https://granitosaurus.github.io/theme/stylesheet/style.min.css">

  <link rel="stylesheet" type="text/css" href="https://granitosaurus.github.io/theme/pygments/github.min.css">
  <link rel="stylesheet" type="text/css" href="https://granitosaurus.github.io/theme/font-awesome/css/font-awesome.min.css">


    <link href="https://granitosaurus.github.io/feeds/all.atom.xml" type="application/atom+xml" rel="alternate" title="Blog of Bernardas Ališauskas Atom">


    <link rel="shortcut icon" href="https://granitosaurus.github.io/images/favicon.ico" type="image/x-icon">
    <link rel="icon" href="https://granitosaurus.github.io/images/favicon.ico" type="image/x-icon">

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="HandheldFriendly" content="True" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <meta name="robots" content="" />


<meta name="author" content="Bernardas Ališauskas" />
<meta name="description" content="Notify-send is great, you should use it!" />
<meta name="keywords" content="python, linux, guide">
<meta property="og:site_name" content="Blog of Bernardas Ališauskas"/>
<meta property="og:title" content="Using python to setup desktop notifications."/>
<meta property="og:description" content="Notify-send is great, you should use it!"/>
<meta property="og:locale" content="en_US"/>
<meta property="og:url" content="https://granitosaurus.github.io/drafts/notify-send.html"/>
<meta property="og:type" content="article"/>
<meta property="article:published_time" content="2016-11-03 10:20:00+01:00"/>
<meta property="article:modified_time" content=""/>
<meta property="article:author" content="https://granitosaurus.github.io/author/bernardas-alisauskas.html">
<meta property="article:section" content="code"/>
<meta property="article:tag" content="python"/>
<meta property="article:tag" content="linux"/>
<meta property="article:tag" content="guide"/>
<meta property="og:image" content="https://granitosaurus.github.io/images/core/me.jpg">

  <title>Blog of Bernardas Ališauskas &ndash; Using python to setup desktop notifications.</title>
</head>
<body>
  <aside>
    <div>
      <a href="https://granitosaurus.github.io">
        <img class="circle" src="https://granitosaurus.github.io/images/core/me.jpg" alt="Bernardas Ališauskas" title="Bernardas Ališauskas">
      </a>
      <h1><a href="https://granitosaurus.github.io">Bernardas Ališauskas</a></h1>

<p>Python programmer and a goof who loves free software, video-games and heavy metal</p>
      <nav>
        <ul class="list">
          <li><a href="https://granitosaurus.github.io/pages/about.html#about">About</a></li>
          <li><a href="https://granitosaurus.github.io/pages/contact.html#contact">Contact</a></li>

        </ul>
      </nav>

      <ul class="social">
        <li><a class="sc-github" href="https://github.com/granitosaurus" target="_blank"><i class="fa fa-github"></i></a></li>
        <li><a class="sc-rss" href="" target="_blank"><i class="fa fa-rss"></i></a></li>
      </ul>

      <a href="http://stackoverflow.com/users/3737009">
        <img src="http://stackoverflow.com/users/flair/3737009.png" width="208" height="58" alt="Stack Overflow Profile">
      </a>
    </div>
  </aside>
  <main>
    <nav>
      <a href="https://granitosaurus.github.io">    Home
</a>

      <a href="/archives.html">Archives</a>
      <a href="/categories.html">Categories</a>
      <a href="/tags.html">Tags</a>

      <a href="https://granitosaurus.github.io/feeds/all.atom.xml">    Atom
</a>

    </nav>

<article class="single">
  <header>
    <h1 id="notify-send">Using python to setup desktop notifications.</h1>
    <p>
          Posted on Thu 03 November 2016 in <a href="https://granitosaurus.github.io/category/code.html">code</a>


    </p>
  </header>
  <div>
    <p>Have you ever wondered how could you incorporate notification pop ups you might see thrown by your operating system in your application? Well worry no more, because this is the subject of this blog. <br>
Linux has some very powerful notification tools that if incorporated into your daily workflow can make things so much more convenient, easy and fun!  </p>
<p>In this blog I'll tell you more about some inner workings of notifications and how to set up a small app in python that can send such notifications.</p>
<h1>Notifications On Linux</h1>
<p>Most gnu/linux systems use <code>libnotify</code> package for notifications - this package provides simple <code>notify-send</code> command line interface for sending notifications to your desktop environment or directly to your xorg display.<br>
To use it however, you need a running daemon program that would handle all of this; my personal recommendation is a great, robust daemon called <code>dunst</code>. You can find more info about this and alternatives to <code>dunst</code> in this arch-wiki <a href="https://wiki.archlinux.org/index.php/Desktop_notifications#Standalone">article</a>.</p>
<p>See [Bonus: Set Up Notification] section of the blog for more info how to set it up.</p>
<h1>Python and Notifications.</h1>
<p>Python is a perfect language for making such notification applications!<br>
By default python comes with everything we need to set this up, however to make things nicer lets use <code>click</code> command line interface package. It will greatly simplify the CLI part of the program. <br>
You can get it from pip via <code>pip install click</code> and skim through the <a href="http://click.pocoo.org/">tutorial here</a> to get a quick gist of what it does.</p>
<p>To display a notification on your desktop using python all you need is to call <code>notify-send</code> via <code>subprocess</code> module like so:</p>
<div class="highlight"><pre><span></span>subprocess.call([&#39;notify-send&#39;, &#39;title&#39;, &#39;body&#39;])
</pre></div>


<p>This will start a process in your terminal that will tell notification daemon to show a notification with supplied title and a body.</p>
<h1>Simple Notification App</h1>
<p>Now that we know how to send notification, we can use this to make a real application.</p>
<p>Combined that with a bit of web-scraping we can create cool little apps that will send this notification when something happens on the web.<br>
For this example let's do hackernews - notification when a new post containing some keywords is being posted.</p>
<p>For this we'll need few python dependencies:<br>
<code>click</code> - an easier way to generate command line interface.<br>
<code>requests</code> - an easier way to get data via http.<br>
<code>parsel</code> - a way to parse the html for the data we need.<br>
All of these are somewhat optional and could be replaced with python's inbuilt tools but these packages are just plain better.</p>
<h3>Bonus: Setup Notifications</h3>
<p>By default majority of gnu/linux distributions already have everything covered for you! <code>libnotify</code> should be installed and some sort of notification daemon should be running in the background.<br>
Try writing this in your terminal:</p>
<div class="highlight"><pre><span></span>notify-send &quot;test title&quot; &quot;test body&quot;
</pre></div>


<p>If you see something, then great - you're done with this step!  </p>
<p>Otherwise you're probably missing a notification daemon. To fix that you need to install one. I recommend and will use <a href="http://knopwob.org/dunst/index.html">dunst</a> in this example.<br>
You can simply pull it from you package manager, e.g.:</p>
<div class="highlight"><pre><span></span>sudo pacman -S dunst  # for arch
sudo apt install dunst  # for ubuntu
</pre></div>


<p>Usually <code>dunst</code> autostarts on majority of system on boot up as DBus autostarts it by default, but some systems might require explicit autostart, so in your init file just call <code>dunst</code>, e.g. for i3wm you'd add <code>exec dunst</code>.  </p>
<p><img alt="dunst solarized" src="{filename}/images/dunst.png">
You can also customize your dunst quite extensively as well. All you need to do is pass the location of the config file as <code>--conf</code> parameter, i.e. <code>dunst --config ~/.dunstrc</code>.<br>
I'm running solarized look and you can find my config <a href="https://github.com/Granitosaurus/.dotfiles/.dunstrc">on my dotfiles repo here</a></p>
<p>My favorite thing about this particular notification daemon is the fact it's keyboard driven which means you can do cool stuff like:</p>
<div class="highlight"><pre><span></span># Close notifactions
close = ctrl+space
close_all = ctrl+shift+space
# Show history of notifications
history = ctrl+grave
# Open context of the notification
# e.g. if notification has an url - open it in default browser
context = ctrl+shift+period
</pre></div>


<p>It's really lovely, convenient, customizable and robust, so give it a shot.</p>
  </div>
  <div class="tag-cloud">
    <p>
      <a href="https://granitosaurus.github.io/tag/python.html">python</a>
      <a href="https://granitosaurus.github.io/tag/linux.html">linux</a>
      <a href="https://granitosaurus.github.io/tag/guide.html">guide</a>
    </p>
  </div>



<div id="disqus_thread"></div>
<script type="text/javascript">
    var disqus_shortname = 'granitosaurus';
    (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
    })();
</script>
<noscript>
        Please enable JavaScript to view comments.

</noscript>
</article>

    <footer>
<p>
  &copy; Bernardas Ališauskas 2016 - This work is licensed under a <a rel="license" href="http://creativecommons.org/licenses/by-sa/4.0/">Creative Commons Attribution-ShareAlike 4.0 International License</a>
</p>
<p>    Powered by <a href="http://getpelican.com" target="_blank">Pelican</a> - <a href="https://github.com/alexandrevicenzi/flex" target="_blank">Flex</a> theme by <a href="http://alexandrevicenzi.com" target="_blank">Alexandre Vicenzi</a>
</p><p>
  <a rel="license"
     href="http://creativecommons.org/licenses/by-sa/4.0/"
     target="_blank">
    <img alt="Creative Commons License"
         title="Creative Commons License"
         style="border-width:0"
         src="https://i.creativecommons.org/l/by-sa/4.0/80x15.png"
         width="80"
         height="15"/>
  </a>
</p>    </footer>
  </main>





<script type="application/ld+json">
{
  "@context" : "http://schema.org",
  "@type" : "Blog",
  "name": " Blog of Bernardas Ališauskas ",
  "url" : "https://granitosaurus.github.io",
  "image": "https://granitosaurus.github.io/images/core/me.jpg",
  "description": "Thoughts and Writings of Granitosaurus"
}
</script>
</body>
</html>